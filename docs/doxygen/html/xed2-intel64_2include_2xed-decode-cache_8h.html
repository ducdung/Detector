<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="TEMU, dynamic analysis, binary analysis, dynamic
taint analysis"/>
<meta name="description" content="C/C++/OCaml Source Code Documentation for the TEMU Project."/>
<title>TEMU: xed-decode-cache.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">TEMU: Dynamic Binary Analysis Platform</p>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_4f22f3fd3d3cce94a331ff7cdf0bf085.html">temu-1.0</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_3b6767f6be6ef802b0654406f3e74d86.html">shared</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_0277bd4601ee6c31034924754cae7495.html">xed2</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_2f75548724af7f3b32ead8785233f31b.html">xed2-intel64</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_136593cfe1f8b65fc4bc5bd8bfe4c752.html">include</a>
  </div>
</div>
<div class="contents">
<h1>xed2-intel64/include/xed-decode-cache.h File Reference</h1>
<p>
<a href="xed2-intel64_2include_2xed-decode-cache_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structxed__decode__cache__entry__t.html">xed_decode_cache_entry_t</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structxed__decode__cache__t.html">xed_decode_cache_t</a></td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">XED_DLL_EXPORT <a class="el" href="xed2-ia32_2include_2xed-error-enum_8h.html#2611877aa5e8b566c1c2be45aa89c792">xed_error_enum_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xed2-intel64_2include_2xed-decode-cache_8h.html#9ed96b4428445279e8137c4fd3d9c754">xed_decode_cache</a> (<a class="el" href="group__DEC.html#ga704925b5f80885a0ac56640a7c70937">xed_decoded_inst_t</a> *xedd, const xed_uint8_t *itext, const unsigned int bytes, <a class="el" href="structxed__decode__cache__t.html">xed_decode_cache_t</a> *cache)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">XED_DLL_EXPORT void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xed2-intel64_2include_2xed-decode-cache_8h.html#e6f404c7495f7da2ad40fcebb1c4c969">xed_decode_cache_initialize</a> (<a class="el" href="structxed__decode__cache__t.html">xed_decode_cache_t</a> *cache, <a class="el" href="structxed__decode__cache__entry__t.html">xed_decode_cache_entry_t</a> *entries, xed_uint32_t n_entries)</td></tr>

</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="9ed96b4428445279e8137c4fd3d9c754"></a><!-- doxytag: member="xed2&#45;intel64/include/xed&#45;decode&#45;cache.h::xed_decode_cache" ref="9ed96b4428445279e8137c4fd3d9c754" args="(xed_decoded_inst_t *xedd, const xed_uint8_t *itext, const unsigned int bytes, xed_decode_cache_t *cache)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">XED_DLL_EXPORT <a class="el" href="xed2-ia32_2include_2xed-error-enum_8h.html#2611877aa5e8b566c1c2be45aa89c792">xed_error_enum_t</a> xed_decode_cache           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__DEC.html#ga704925b5f80885a0ac56640a7c70937">xed_decoded_inst_t</a> *&nbsp;</td>
          <td class="paramname"> <em>xedd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const xed_uint8_t *&nbsp;</td>
          <td class="paramname"> <em>itext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned int&nbsp;</td>
          <td class="paramname"> <em>bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structxed__decode__cache__t.html">xed_decode_cache_t</a> *&nbsp;</td>
          <td class="paramname"> <em>cache</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This is the main interface to the decoder. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>xedd</em>&nbsp;</td><td>the decoded instruction of type <a class="el" href="group__DEC.html#ga704925b5f80885a0ac56640a7c70937">xed_decoded_inst_t</a> . Mode/state sent in via xedd; See the <a class="el" href="group__INIT.html#g58af142456a133c3df29c763216a85cf">xed_state_t</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>itext</em>&nbsp;</td><td>the pointer to the array of instruction text bytes </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bytes</em>&nbsp;</td><td>the length of the itext input array. 1 to 15 bytes, anything more is ignored. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cache</em>&nbsp;</td><td>a per-thread decode cache allocated by the user and initialized once with <a class="el" href="xed2-ia32_2include_2xed-decode-cache_8h.html#e6f404c7495f7da2ad40fcebb1c4c969">xed_decode_cache_initialize()</a>. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd><a class="el" href="xed2-intel64_2include_2xed-error-enum_8h.html#2611877aa5e8b566c1c2be45aa89c792">xed_error_enum_t</a> indiciating success (<a class="el" href="xed2-intel64_2include_2xed-error-enum_8h.html#2611877aa5e8b566c1c2be45aa89c792d9f5736eacb4d9dedd9aadf1d75b9de6" title="There was no error.">XED_ERROR_NONE</a>) or failure. Note failure can be due to not enough bytes in the input array.</dd></dl>
The maximum instruction is 15B and XED will tell you how long the actual instruction is via an API function call <a class="el" href="group__DEC.html#gd1051f7b86c94d5670f684a6ea79fcdf">xed_decoded_inst_get_length()</a>. However, it is not always safe or advisable for XED to read 15 bytes if the decode location is at the boundary of some sort of protection limit. For example, if one is decoding near the end of a page and the XED user does not want to cause extra page faults, one might send in the number of bytes that would stop at the page boundary. In this case, XED might not be able to decode the instruction and would return an error. The XED user would then have to decide if it was safe to touch the next page and try again to decode with more bytes. Also sometimes the user process does not have read access to the next page and this allows the user to prevent XED from causing process termination by limiting the memory range that XED will access. 
</div>
</div><p>
<a class="anchor" name="e6f404c7495f7da2ad40fcebb1c4c969"></a><!-- doxytag: member="xed2&#45;intel64/include/xed&#45;decode&#45;cache.h::xed_decode_cache_initialize" ref="e6f404c7495f7da2ad40fcebb1c4c969" args="(xed_decode_cache_t *cache, xed_decode_cache_entry_t *entries, xed_uint32_t n_entries)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">XED_DLL_EXPORT void xed_decode_cache_initialize           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structxed__decode__cache__t.html">xed_decode_cache_t</a> *&nbsp;</td>
          <td class="paramname"> <em>cache</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structxed__decode__cache__entry__t.html">xed_decode_cache_entry_t</a> *&nbsp;</td>
          <td class="paramname"> <em>entries</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">xed_uint32_t&nbsp;</td>
          <td class="paramname"> <em>n_entries</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Have XED initialize the decode cache that you've allocated. You must allocate one decode cache per thread if you are using the <a class="el" href="xed2-intel64_2include_2xed-decode-cache_8h.html#9ed96b4428445279e8137c4fd3d9c754">xed_decode_cache</a>. The number of entries must be a power of 2. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>cache</em>&nbsp;</td><td>a pointer to your <a class="el" href="structxed__decode__cache__t.html">xed_decode_cache_t</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>entries</em>&nbsp;</td><td>an array you have allocated. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>n_entries</em>&nbsp;</td><td>number of <a class="el" href="structxed__decode__cache__entry__t.html">xed_decode_cache_entry_t</a> entries, not bytes. </td></tr>
  </table>
</dl>

</div>
</div><p>
</div>
<hr>
<p class="footer">
Generated on Fri Mar 30 16:18:25 2012 for <a href="http://bitblaze.cs.berkeley.edu/temu.html">TEMU</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.5.8</a><br/>
Copyright &copy; 2008-2009, BitBlaze Project. All Rights Reserved.</p>

<hr>
<!--#include virtual="/attrib.incl" -->

</body>
</html>
